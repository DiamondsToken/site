{"version":3,"file":"DexWidgetProvider.Bu8RHPaI.js","sources":["../src/DexWidgetProvider.tsx"],"sourcesContent":["import React, { createContext, useContext, useRef, useEffect, ReactNode, useState } from 'react';\n\nimport { createOkxSwapWidget, type OkxSwapWidgetHandler, type IWidgetConfig } from './index';\n\n\n// 创建上下文\nconst DexWidgetContext = createContext<OkxSwapWidgetHandler | null>(null);\n\ninterface DexWidgetProviderProps {\n    children: ReactNode;\n    config: IWidgetConfig;\n}\n\nexport const DexWidgetProvider: React.FC<DexWidgetProviderProps> = ({ children, config }) => {\n    const iframeContainerRef = useRef<HTMLDivElement>(null);\n    const [providerState, setProviderState] = useState(null);\n\n    useEffect(() => {\n        if (iframeContainerRef.current) {\n            setProviderState(createOkxSwapWidget(iframeContainerRef.current, config))\n        }\n\n        return () => {\n            providerState?.destroy();\n        };\n    }, [config]);\n\n    console.log('widgetHandlerRef.current', providerState, iframeContainerRef);\n\n    return (\n        <DexWidgetContext.Provider value={providerState}>\n            <div ref={iframeContainerRef} style={{ width: '100%', height: config.params.height }} />\n            {children}\n        </DexWidgetContext.Provider>\n    );\n};\n\nexport const useDexWidget = () => {\n    return useContext(DexWidgetContext);\n};\n\nexport { createOkxSwapWidget, OkxSwapWidgetHandler };"],"names":["DexWidgetContext","createContext","DexWidgetProvider","children","config","iframeContainerRef","useRef","providerState","setProviderState","useState","useEffect","createOkxSwapWidget","React","useDexWidget","useContext"],"mappings":"yKAMA,MAAMA,EAAmBC,EAAAA,cAA2C,IAAI,EAO3DC,EAAsD,CAAC,CAAE,SAAAC,EAAU,OAAAC,KAAa,CACnF,MAAAC,EAAqBC,SAAuB,IAAI,EAChD,CAACC,EAAeC,CAAgB,EAAIC,WAAS,IAAI,EAEvDC,OAAAA,EAAAA,UAAU,KACFL,EAAmB,SACnBG,EAAiBG,EAAAA,oBAAoBN,EAAmB,QAASD,CAAM,CAAC,EAGrE,IAAM,CACTG,GAAA,MAAAA,EAAe,SAAQ,GAE5B,CAACH,CAAM,CAAC,EAEH,QAAA,IAAI,2BAA4BG,EAAeF,CAAkB,EAGrEO,EAAA,cAACZ,EAAiB,SAAjB,CAA0B,MAAOO,GAC9BK,EAAA,cAAC,OAAI,IAAKP,EAAoB,MAAO,CAAE,MAAO,OAAQ,OAAQD,EAAO,OAAO,MAAO,EAAG,EACrFD,CACL,CAER,EAEaU,EAAe,IACjBC,EAAAA,WAAWd,CAAgB"}